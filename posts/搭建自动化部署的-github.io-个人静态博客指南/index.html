<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>搭建自动化部署的 GitHub.io 个人静态博客指南 | Cassius0924 的博客</title><meta name=keywords content="GitHub Pages,MkDocs,CI/CD,GitHub Actions,Deployment,Tutorial"><meta name=description content="本文章主要介绍如何使用 GitHub Actions 实现基于 MkDocs 的 GitHub.io 个人静态博客的自动化部署。
本指南主要分为以下几个部分：

创建 GitHub 仓库
创建 MkDocs 项目
配置 GitHub Actions
部署到 GitHub Pages

创建 GitHub 仓库由于我们的博客是托管在 GitHub io 上的，所以我们需要一个 GitHub 仓库来存放我们的 MkDocs 博客。
创建仓库首先，我们需要在 GitHub 上创建一个新的仓库，仓库名可以是 <username>.github.io，其中 <username> 是你的 GitHub 用户名。

克隆仓库然后，我们需要将这个仓库克隆到本地：
git clone <repository-url>
cd <repository-name>
创建 MkDocs 项目安装 MkDocsMkDocs 是一个 Python 项目使用 pip 安装：
pip install mkdocs
我们需要创建一个 MkDocs 项目，可以使用 MkDocs 官方提供的模板来创建。直接在仓库根目录执行以下命令即可：
mkdocs new .
然后，我们需要安装 MkDocs Material 主题。当然我们也可以选择其他主题，可以在 MkDocs 的 WiKi 查看更多主题。"><meta name=author content="Cassius0924"><link rel=canonical href=https://blog.cassdev.com/posts/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%9A%84-github.io-%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/><link crossorigin=anonymous href=/assets/css/stylesheet.4f5249ac184c033613d94c5267209e90161d3a93365c2feb0ad3960a4bbb6393.css integrity="sha256-T1JJrBhMAzYT2UxSZyCekBYdOpM2XC/rCtOWCku7Y5M=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.cassdev.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.cassdev.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.cassdev.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.cassdev.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.cassdev.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://blog.cassdev.com/posts/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%9A%84-github.io-%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://blog.cassdev.com/posts/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%9A%84-github.io-%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/"><meta property="og:site_name" content="Cassius0924 的博客"><meta property="og:title" content="搭建自动化部署的 GitHub.io 个人静态博客指南"><meta property="og:description" content="本文章主要介绍如何使用 GitHub Actions 实现基于 MkDocs 的 GitHub.io 个人静态博客的自动化部署。
本指南主要分为以下几个部分：
创建 GitHub 仓库 创建 MkDocs 项目 配置 GitHub Actions 部署到 GitHub Pages 创建 GitHub 仓库由于我们的博客是托管在 GitHub io 上的，所以我们需要一个 GitHub 仓库来存放我们的 MkDocs 博客。
创建仓库首先，我们需要在 GitHub 上创建一个新的仓库，仓库名可以是 <username>.github.io，其中 <username> 是你的 GitHub 用户名。
克隆仓库然后，我们需要将这个仓库克隆到本地：
git clone <repository-url> cd <repository-name> 创建 MkDocs 项目安装 MkDocsMkDocs 是一个 Python 项目使用 pip 安装：
pip install mkdocs 我们需要创建一个 MkDocs 项目，可以使用 MkDocs 官方提供的模板来创建。直接在仓库根目录执行以下命令即可：
mkdocs new . 然后，我们需要安装 MkDocs Material 主题。当然我们也可以选择其他主题，可以在 MkDocs 的 WiKi 查看更多主题。"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-06-17T21:11:04+08:00"><meta property="article:modified_time" content="2024-06-17T21:11:04+08:00"><meta property="article:tag" content="GitHub Pages"><meta property="article:tag" content="MkDocs"><meta property="article:tag" content="CI/CD"><meta property="article:tag" content="GitHub Actions"><meta property="article:tag" content="Deployment"><meta property="article:tag" content="Tutorial"><meta name=twitter:card content="summary"><meta name=twitter:title content="搭建自动化部署的 GitHub.io 个人静态博客指南"><meta name=twitter:description content="本文章主要介绍如何使用 GitHub Actions 实现基于 MkDocs 的 GitHub.io 个人静态博客的自动化部署。
本指南主要分为以下几个部分：

创建 GitHub 仓库
创建 MkDocs 项目
配置 GitHub Actions
部署到 GitHub Pages

创建 GitHub 仓库由于我们的博客是托管在 GitHub io 上的，所以我们需要一个 GitHub 仓库来存放我们的 MkDocs 博客。
创建仓库首先，我们需要在 GitHub 上创建一个新的仓库，仓库名可以是 <username>.github.io，其中 <username> 是你的 GitHub 用户名。

克隆仓库然后，我们需要将这个仓库克隆到本地：
git clone <repository-url>
cd <repository-name>
创建 MkDocs 项目安装 MkDocsMkDocs 是一个 Python 项目使用 pip 安装：
pip install mkdocs
我们需要创建一个 MkDocs 项目，可以使用 MkDocs 官方提供的模板来创建。直接在仓库根目录执行以下命令即可：
mkdocs new .
然后，我们需要安装 MkDocs Material 主题。当然我们也可以选择其他主题，可以在 MkDocs 的 WiKi 查看更多主题。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.cassdev.com/posts/"},{"@type":"ListItem","position":2,"name":"搭建自动化部署的 GitHub.io 个人静态博客指南","item":"https://blog.cassdev.com/posts/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%9A%84-github.io-%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"搭建自动化部署的 GitHub.io 个人静态博客指南","name":"搭建自动化部署的 GitHub.io 个人静态博客指南","description":"本文章主要介绍如何使用 GitHub Actions 实现基于 MkDocs 的 GitHub.io 个人静态博客的自动化部署。\n本指南主要分为以下几个部分：\n创建 GitHub 仓库 创建 MkDocs 项目 配置 GitHub Actions 部署到 GitHub Pages 创建 GitHub 仓库由于我们的博客是托管在 GitHub io 上的，所以我们需要一个 GitHub 仓库来存放我们的 MkDocs 博客。\n创建仓库首先，我们需要在 GitHub 上创建一个新的仓库，仓库名可以是 \u0026lt;username\u0026gt;.github.io，其中 \u0026lt;username\u0026gt; 是你的 GitHub 用户名。\n克隆仓库然后，我们需要将这个仓库克隆到本地：\ngit clone \u0026lt;repository-url\u0026gt; cd \u0026lt;repository-name\u0026gt; 创建 MkDocs 项目安装 MkDocsMkDocs 是一个 Python 项目使用 pip 安装：\npip install mkdocs 我们需要创建一个 MkDocs 项目，可以使用 MkDocs 官方提供的模板来创建。直接在仓库根目录执行以下命令即可：\nmkdocs new . 然后，我们需要安装 MkDocs Material 主题。当然我们也可以选择其他主题，可以在 MkDocs 的 WiKi 查看更多主题。\n","keywords":["GitHub Pages","MkDocs","CI/CD","GitHub Actions","Deployment","Tutorial"],"articleBody":"本文章主要介绍如何使用 GitHub Actions 实现基于 MkDocs 的 GitHub.io 个人静态博客的自动化部署。\n本指南主要分为以下几个部分：\n创建 GitHub 仓库 创建 MkDocs 项目 配置 GitHub Actions 部署到 GitHub Pages 创建 GitHub 仓库由于我们的博客是托管在 GitHub io 上的，所以我们需要一个 GitHub 仓库来存放我们的 MkDocs 博客。\n创建仓库首先，我们需要在 GitHub 上创建一个新的仓库，仓库名可以是 .github.io，其中 是你的 GitHub 用户名。\n克隆仓库然后，我们需要将这个仓库克隆到本地：\ngit clone cd 创建 MkDocs 项目安装 MkDocsMkDocs 是一个 Python 项目使用 pip 安装：\npip install mkdocs 我们需要创建一个 MkDocs 项目，可以使用 MkDocs 官方提供的模板来创建。直接在仓库根目录执行以下命令即可：\nmkdocs new . 然后，我们需要安装 MkDocs Material 主题。当然我们也可以选择其他主题，可以在 MkDocs 的 WiKi 查看更多主题。\npip install mkdocs-material markdown-callouts 笔记 这里我安装了 markdown-callouts 插件，这个插件可以让我们在 MkDocs 中使用 GitHub 的 callouts 语法，比如 \u003e [!NOTE]、\u003e [!WARNING] 等。\n因此我们为项目添加一个 requirements.txt 文件，执行 vim requirements.txt，并粘贴如下内容：\nmarkdown-callouts\u003e=0.4.0 配置 MkDocsMkDocs 的配置文件是 mkdocs.yml，我们可以在这个文件中配置 MkDocs 的一些参数，比如主题、导航栏等。 具体的配置可以参考 MkDocs 的官方文档。\n下面是我个人的配置文件示例：\nmkdocs.yml site_name: Cassius0924's Blog # site_url: https://cassius0924.github.io site_author: Cassius0924 repo_name: 'Cassius0924/Cassius0924.github.io' copyright: \"Copyright \u0026copy; 2024 - 2024 Chihchou Ho\" name: 'material' palette: primary: 'indigo' accent: 'indigo' features: - content.code.select - content.code.copy language: 'zh' extra: social: - icon: 'fontawesome/brands/github' link: 'https://github.com/cassius0924' - icon: 'fontawesome/brands/bilibili' link: 'https://space.bilibili.com/12873865' markdown_extensions: - github-callouts # github callouts 语法支持 - admonition # 注解块支持 - pymdownx.arithmatex # 数学公式的TeX语法支持 - pymdownx.betterem: smart_enable: all - pymdownx.caret - pymdownx.critic - pymdownx.details - pymdownx.emoji: # 表情支持 emoji_generator: !!python/name:pymdownx.emoji.to_svg - pymdownx.magiclink - pymdownx.mark - pymdownx.smartsymbols - pymdownx.tasklist: # 任务清单支持 custom_checkbox: true - pymdownx.tilde - pymdownx.highlight: anchor_linenums: true line_spans: __span pygments_lang_class: true - pymdownx.inlinehilite - pymdownx.snippets - pymdownx.superfences - meta # 元数据支持 extra_javascript: - 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML' plugins: - search 编写 Markdown 文件在 docs 目录下编写 Markdown 文件，也就是将我们以前写的 Markdown 格式的博客文件放在这里，这些文件将会被 MkDocs 转换成静态网页。\n其中，index.md 是默认的首页文件，当访问网站时，会默认显示这个文件。\n本地预览在本地预览 MkDocs 生成的静态网页，可以执行以下命令：\nmkdocs serve 然后，打开浏览器访问终端打印的地址，如： http://127.0.0.1:8000/。可以进一步根据需求修改 MkDocs 配置，自己满意了就可以进行下一步。\n配置 GitHub ActionsGitHub Actions 是 GitHub 提供的持续集成服务，我们可以使用它来实现自动化部署。\n创建 Actions 配置文件在仓库根目录下创建 .github/workflows 目录，并在该目录下创建一个名为 deploy.yml 的文件，内容如下：\nname: Deploy on: push: branches: - main jobs: build: name: Deploy docs to GitHub Pages runs-on: ubuntu-latest steps: - name: Checkout uses: actions/checkout@v2 - name: Build uses: Tiryoh/actions-mkdocs@v0 with: mkdocs_version: 'latest' requirements: 'requirements.txt' configfile: 'mkdocs.yml' - name: Deploy uses: peaceiris/actions-gh-pages@v4 with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./site publish_branch: gh-pages 这个配置文件定义了一个名为 Deploy 的工作流，当 main 分支有代码提交时，会触发这个工作流。\n可以发现这个 deploy.yml 中使用了一个名为 GITHUB_TOKEN 的 secret，GitHub 会为每个工作流都创建并注入 GITHUB_TOKEN，我们并不需要手动创建这个 secret。\n这个工作流包含了三个步骤：\nCheckout：检出代码 Build：构建 MkDocs 项目 Deploy：部署到 GitHub Pages（推送到 GitHub 的 gh-pages 分支） 设置 Workflow 权限进入仓库的 Settings -\u003e Actions -\u003e Generals 页面，滑到下面，找到 Workflow permissions，勾选 Read and write permissions，然后点击 Save。\n部署到 GitHub Pages当我们将代码推送到 GitHub 的 main 分支时，GitHub Actions 会自动触发工作流，构建 MkDocs 项目，并将生成的静态网页推送到 gh-pages 分支。\n由于 GitHub 不允许使用 HTTPS 协议推送代码，所以 Push 前需要将本地仓库的远程仓库地址修改为你远程仓库 SSH 地址：\ngit remote set-url origin 然后，将代码推送到 GitHub：\ngit add . git commit -m \"Add MkDocs project\" git push origin main 等待 GitHub Actions 完成构建，此时还未部署成功，还需进行最后一步设置。\n设置 GitHub Pages在 GitHub 仓库的 Settings -\u003e Pages 中，将 Branch 设置为 gh-pages，Folder 设置为 / (root)，点击 Save 即可。\n此时 GitHub 会再运行一个 GitHub Pages 的 action。等待 action 运行完毕完成后，即可访问 https://.github.io 查看你的博客。\n关于自动化完成上述步骤后，GitHub.io 就可以实现自动化部署了。每次我们将新博客推送到 main 分支时，GitHub Actions 会自动构建 MkDocs 项目，并将生成的静态网页推送到 gh-pages 分支，网站也会自动更新。\n","wordCount":"432","inLanguage":"zh","datePublished":"2024-06-17T21:11:04+08:00","dateModified":"2024-06-17T21:11:04+08:00","author":{"@type":"Person","name":"Cassius0924"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.cassdev.com/posts/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%9A%84-github.io-%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/"},"publisher":{"@type":"Organization","name":"Cassius0924 的博客","logo":{"@type":"ImageObject","url":"https://blog.cassdev.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.cassdev.com/ accesskey=h title="Cassius0924 的博客 (Alt + H)">Cassius0924 的博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://blog.cassdev.com/en/ title=English aria-label=English>English</a></li></ul></div></div><ul id=menu><li><a href=https://blog.cassdev.com/ title="Cassius0924 的博客"><span>首页</span></a></li><li><a href=https://blog.cassdev.com/search/ title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li><li><a href=https://blog.cassdev.com/mind-space/ title=思维空间><span>思维空间</span></a></li><li><a href=https://blog.cassdev.com/tags/ title=标签><span>标签</span></a></li><li><a href=https://blog.cassdev.com/archives/ title=归档><span>归档</span></a></li><li><a href=https://blog.cassdev.com/friends/ title=友链><span>友链</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.cassdev.com/>主页</a>&nbsp;»&nbsp;<a href=https://blog.cassdev.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">搭建自动化部署的 GitHub.io 个人静态博客指南</h1><div class=post-meta><span title='2024-06-17 21:11:04 +0800 +0800'>2024年06月17日</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;Cassius0924</div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e5%88%9b%e5%bb%ba-github-%e4%bb%93%e5%ba%93 aria-label="创建 GitHub 仓库">创建 GitHub 仓库</a><ul><li><a href=#%e5%88%9b%e5%bb%ba%e4%bb%93%e5%ba%93 aria-label=创建仓库>创建仓库</a></li><li><a href=#%e5%85%8b%e9%9a%86%e4%bb%93%e5%ba%93 aria-label=克隆仓库>克隆仓库</a></li></ul></li><li><a href=#%e5%88%9b%e5%bb%ba-mkdocs-%e9%a1%b9%e7%9b%ae aria-label="创建 MkDocs 项目">创建 MkDocs 项目</a><ul><li><a href=#%e5%ae%89%e8%a3%85-mkdocs aria-label="安装 MkDocs">安装 MkDocs</a></li><li><a href=#%e9%85%8d%e7%bd%ae-mkdocs aria-label="配置 MkDocs">配置 MkDocs</a></li><li><a href=#%e7%bc%96%e5%86%99-markdown-%e6%96%87%e4%bb%b6 aria-label="编写 Markdown 文件">编写 Markdown 文件</a></li><li><a href=#%e6%9c%ac%e5%9c%b0%e9%a2%84%e8%a7%88 aria-label=本地预览>本地预览</a></li></ul></li><li><a href=#%e9%85%8d%e7%bd%ae-github-actions aria-label="配置 GitHub Actions">配置 GitHub Actions</a><ul><li><a href=#%e5%88%9b%e5%bb%ba-actions-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6 aria-label="创建 Actions 配置文件">创建 Actions 配置文件</a></li><li><a href=#%e8%ae%be%e7%bd%ae-workflow-%e6%9d%83%e9%99%90 aria-label="设置 Workflow 权限">设置 Workflow 权限</a></li></ul></li><li><a href=#%e9%83%a8%e7%bd%b2%e5%88%b0-github-pages aria-label="部署到 GitHub Pages">部署到 GitHub Pages</a><ul><li><a href=#%e8%ae%be%e7%bd%ae-github-pages aria-label="设置 GitHub Pages">设置 GitHub Pages</a></li></ul></li><li><a href=#%e5%85%b3%e4%ba%8e%e8%87%aa%e5%8a%a8%e5%8c%96 aria-label=关于自动化>关于自动化</a></li></ul></div></details></div><div class=post-content><p>本文章主要介绍如何使用 GitHub Actions 实现基于 MkDocs 的 GitHub.io 个人静态博客的自动化部署。</p><p>本指南主要分为以下几个部分：</p><ul><li><a href=/posts/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%9A%84-github.io-%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/#%e5%88%9b%e5%bb%ba-github-%e4%bb%93%e5%ba%93>创建 GitHub 仓库</a></li><li><a href=/posts/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%9A%84-github.io-%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/#%e5%88%9b%e5%bb%ba-mkdocs-%e9%a1%b9%e7%9b%ae>创建 MkDocs 项目</a></li><li><a href=/posts/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%9A%84-github.io-%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/#%e9%85%8d%e7%bd%ae-github-actions>配置 GitHub Actions</a></li><li><a href=/posts/%E6%90%AD%E5%BB%BA%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E7%9A%84-github.io-%E4%B8%AA%E4%BA%BA%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/#%e9%83%a8%e7%bd%b2%e5%88%b0-github-pages>部署到 GitHub Pages</a></li></ul><h2 id=创建-github-仓库>创建 GitHub 仓库<a hidden class=anchor aria-hidden=true href=#创建-github-仓库>#</a></h2><p>由于我们的博客是托管在 GitHub io 上的，所以我们需要一个 GitHub 仓库来存放我们的 MkDocs 博客。</p><h3 id=创建仓库>创建仓库<a hidden class=anchor aria-hidden=true href=#创建仓库>#</a></h3><p>首先，我们需要在 GitHub 上创建一个新的仓库，仓库名可以是 <code>&lt;username>.github.io</code>，其中 <code>&lt;username></code> 是你的 GitHub 用户名。</p><p><img alt="创建 GitHub 仓库" loading=lazy src=https://s2.loli.net/2024/06/17/X43nikWmO7hVGrb.png></p><h3 id=克隆仓库>克隆仓库<a hidden class=anchor aria-hidden=true href=#克隆仓库>#</a></h3><p>然后，我们需要将这个仓库克隆到本地：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git clone &lt;repository-url&gt;
</span></span><span class=line><span class=cl><span class=nb>cd</span> &lt;repository-name&gt;
</span></span></code></pre></div><h2 id=创建-mkdocs-项目>创建 MkDocs 项目</h2><h3 id=安装-mkdocs>安装 MkDocs<a hidden class=anchor aria-hidden=true href=#创建-mkdocs-项目>#</a></h3><p>MkDocs 是一个 Python 项目使用 pip 安装：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip install mkdocs
</span></span></code></pre></div><p>我们需要创建一个 MkDocs 项目，可以使用 MkDocs 官方提供的模板来创建。直接在仓库根目录执行以下命令即可：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdocs new .
</span></span></code></pre></div><p>然后，我们需要安装 MkDocs Material 主题。当然我们也可以选择其他主题，可以在 MkDocs 的 <a href=https://github.com/mkdocs/mkdocs/wiki/MkDocs-Themes>WiKi</a> 查看更多主题。</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>pip install mkdocs-material markdown-callouts
</span></span></code></pre></div><link rel=stylesheet href=/css/vendors/admonitions.4fd9a0b8ec8899f2ca952048d255a569f433f77dfb3f52f5bc87e7d65cdce449.css integrity="sha256-T9mguOyImfLKlSBI0lWlafQz9337P1L1vIfn1lzc5Ek=" crossorigin=anonymous><div class="admonition note"><div class=admonition-header><svg viewBox="0 0 576 512"><path d="M0 64C0 28.7 28.7.0 64 0H224v128c0 17.7 14.3 32 32 32h128v125.7l-86.8 86.8c-10.3 10.3-17.5 23.1-21 37.2l-18.7 74.9c-2.3 9.2-1.8 18.8 1.3 27.5L64 512c-35.3.0-64-28.7-64-64V64zm384 64H256V0L384 128zM549.8 235.7l14.4 14.4c15.6 15.6 15.6 40.9.0 56.6l-29.4 29.4-71-71 29.4-29.4c15.6-15.6 40.9-15.6 56.6.0zM311.9 417 441.1 287.8l71 71L382.9 487.9c-4.1 4.1-9.2 7-14.9 8.4l-60.1 15c-5.5 1.4-11.2-.2-15.2-4.2s-5.6-9.7-4.2-15.2l15-60.1c1.4-5.6 4.3-10.8 8.4-14.9z"/></svg>
<span>笔记</span></div><div class=admonition-content><p>这里我安装了 <code>markdown-callouts</code> 插件，这个插件可以让我们在 MkDocs 中使用 GitHub 的 callouts 语法，比如 <code>> [!NOTE]</code>、<code>> [!WARNING]</code> 等。</p></div></div><p>因此我们为项目添加一个 <code>requirements.txt</code> 文件，执行 <code>vim requirements.txt</code>，并粘贴如下内容：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>markdown-callouts&gt;=0.4.0
</span></span></code></pre></div><h3 id=配置-mkdocs>配置 MkDocs<a hidden class=anchor aria-hidden=true href=#配置-mkdocs>#</a></h3><p>MkDocs 的配置文件是 <code>mkdocs.yml</code>，我们可以在这个文件中配置 MkDocs 的一些参数，比如主题、导航栏等。 具体的配置可以参考 MkDocs 的<a href=https://hellowac.github.io/mkdocs-docs-zh/user-guide/configuration>官方文档</a>。</p><p>下面是我个人的配置文件示例：</p><details><summary>mkdocs.yml</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>site_name</span><span class=p>:</span><span class=w> </span><span class=l>Cassius0924&#39;s Blog</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=c># site_url: https://cassius0924.github.io</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>site_author</span><span class=p>:</span><span class=w> </span><span class=l>Cassius0924</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>repo_name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;Cassius0924/Cassius0924.github.io&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>copyright</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Copyright &amp;copy; 2024 - 2024 Chihchou Ho&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;material&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>palette</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>primary</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;indigo&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>accent</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;indigo&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>features</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>content.code.select</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=l>content.code.copy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>language</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;zh&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extra</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>social</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;fontawesome/brands/github&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>link</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;https://github.com/cassius0924&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>icon</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;fontawesome/brands/bilibili&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>link</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;https://space.bilibili.com/12873865&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>markdown_extensions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>github-callouts</span><span class=w> </span><span class=c># github callouts 语法支持</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>admonition</span><span class=w> </span><span class=c># 注解块支持</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.arithmatex</span><span class=w> </span><span class=c># 数学公式的TeX语法支持</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>pymdownx.betterem</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>smart_enable</span><span class=p>:</span><span class=w> </span><span class=l>all</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.caret</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.critic</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.details</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>pymdownx.emoji</span><span class=p>:</span><span class=w> </span><span class=c># 表情支持</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>emoji_generator</span><span class=p>:</span><span class=w> </span><span class=cp>!!python/name:pymdownx.emoji.to_svg</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.magiclink</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.mark</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.smartsymbols</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>pymdownx.tasklist</span><span class=p>:</span><span class=w> </span><span class=c># 任务清单支持</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>custom_checkbox</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.tilde</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>pymdownx.highlight</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>anchor_linenums</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>line_spans</span><span class=p>:</span><span class=w> </span><span class=l>__span</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>pygments_lang_class</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.inlinehilite</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.snippets</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>pymdownx.superfences</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>meta</span><span class=w> </span><span class=c># 元数据支持</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>extra_javascript</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=s1>&#39;https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>plugins</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=l>search</span><span class=w>
</span></span></span></code></pre></div></details><h3 id=编写-markdown-文件>编写 Markdown 文件<a hidden class=anchor aria-hidden=true href=#编写-markdown-文件>#</a></h3><p>在 <code>docs</code> 目录下编写 Markdown 文件，也就是将我们以前写的 Markdown 格式的博客文件放在这里，这些文件将会被 MkDocs 转换成静态网页。</p><p>其中，<code>index.md</code> 是默认的首页文件，当访问网站时，会默认显示这个文件。</p><h3 id=本地预览>本地预览<a hidden class=anchor aria-hidden=true href=#本地预览>#</a></h3><p>在本地预览 MkDocs 生成的静态网页，可以执行以下命令：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdocs serve
</span></span></code></pre></div><p>然后，打开浏览器访问终端打印的地址，如： <code>http://127.0.0.1:8000/</code>。可以进一步根据需求修改 MkDocs 配置，自己满意了就可以进行下一步。</p><h2 id=配置-github-actions>配置 GitHub Actions<a hidden class=anchor aria-hidden=true href=#配置-github-actions>#</a></h2><p>GitHub Actions 是 GitHub 提供的持续集成服务，我们可以使用它来实现自动化部署。</p><h3 id=创建-actions-配置文件>创建 Actions 配置文件<a hidden class=anchor aria-hidden=true href=#创建-actions-配置文件>#</a></h3><p>在仓库根目录下创建 <code>.github/workflows</code> 目录，并在该目录下创建一个名为 <code>deploy.yml</code> 的文件，内容如下：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>push</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>branches</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=l>main</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy docs to GitHub Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Checkout</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>Tiryoh/actions-mkdocs@v0</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>mkdocs_version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;latest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>requirements</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;requirements.txt&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>configfile</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;mkdocs.yml&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          
</span></span></span><span class=line><span class=cl><span class=w>      </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>peaceiris/actions-gh-pages@v4</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>github_token</span><span class=p>:</span><span class=w> </span><span class=l>${{ secrets.GITHUB_TOKEN }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_dir</span><span class=p>:</span><span class=w> </span><span class=l>./site</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>publish_branch</span><span class=p>:</span><span class=w> </span><span class=l>gh-pages</span><span class=w>
</span></span></span></code></pre></div><p>这个配置文件定义了一个名为 <code>Deploy</code> 的工作流，当 <code>main</code> 分支有代码提交时，会触发这个工作流。</p><p>可以发现这个 <code>deploy.yml</code> 中使用了一个名为 <code>GITHUB_TOKEN</code> 的 secret，GitHub 会为每个工作流都创建并注入 <code>GITHUB_TOKEN</code>，我们并不需要手动创建这个 secret。</p><p>这个工作流包含了三个步骤：</p><ol><li><code>Checkout</code>：检出代码</li><li><code>Build</code>：构建 MkDocs 项目</li><li><code>Deploy</code>：部署到 GitHub Pages（推送到 GitHub 的 <code>gh-pages</code> 分支）</li></ol><h3 id=设置-workflow-权限>设置 Workflow 权限<a hidden class=anchor aria-hidden=true href=#设置-workflow-权限>#</a></h3><p>进入仓库的 Settings -> Actions -> Generals 页面，滑到下面，找到 <code>Workflow permissions</code>，勾选 <code>Read and write permissions</code>，然后点击 <code>Save</code>。</p><p><img alt="Workflow permissions" loading=lazy src=https://s2.loli.net/2024/06/20/1Nzr9iK8jRHbW25.png></p><h2 id=部署到-github-pages>部署到 GitHub Pages<a hidden class=anchor aria-hidden=true href=#部署到-github-pages>#</a></h2><p>当我们将代码推送到 GitHub 的 <code>main</code> 分支时，GitHub Actions 会自动触发工作流，构建 MkDocs 项目，并将生成的静态网页推送到 <code>gh-pages</code> 分支。</p><p>由于 GitHub 不允许使用 HTTPS 协议推送代码，所以 Push 前需要将本地仓库的远程仓库地址修改为你远程仓库 SSH 地址：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git remote set-url origin &lt;ssh-repo-url&gt;
</span></span></code></pre></div><p>然后，将代码推送到 GitHub：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git add .
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;Add MkDocs project&#34;</span>
</span></span><span class=line><span class=cl>git push origin main
</span></span></code></pre></div><p>等待 GitHub Actions 完成构建，此时还未部署成功，还需进行最后一步设置。</p><h3 id=设置-github-pages>设置 GitHub Pages<a hidden class=anchor aria-hidden=true href=#设置-github-pages>#</a></h3><p>在 GitHub 仓库的 Settings -> Pages 中，将 Branch 设置为 <code>gh-pages</code>，Folder 设置为 <code>/ (root)</code>，点击 Save 即可。</p><p><img alt="GitHub Pages" loading=lazy src=https://s2.loli.net/2024/06/17/LaRdUmcpiMw4z2f.png></p><p>此时 GitHub 会再运行一个 GitHub Pages 的 action。等待 action 运行完毕完成后，即可访问 <code>https://&lt;username>.github.io</code> 查看你的博客。</p><h2 id=关于自动化>关于自动化<a hidden class=anchor aria-hidden=true href=#关于自动化>#</a></h2><p>完成上述步骤后，GitHub.io 就可以实现自动化部署了。每次我们将新博客推送到 <code>main</code> 分支时，GitHub Actions 会自动构建 MkDocs 项目，并将生成的静态网页推送到 <code>gh-pages</code> 分支，网站也会自动更新。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.cassdev.com/tags/github-pages/>GitHub Pages</a></li><li><a href=https://blog.cassdev.com/tags/mkdocs/>MkDocs</a></li><li><a href=https://blog.cassdev.com/tags/ci/cd/>CI/CD</a></li><li><a href=https://blog.cassdev.com/tags/github-actions/>GitHub Actions</a></li><li><a href=https://blog.cassdev.com/tags/deployment/>Deployment</a></li><li><a href=https://blog.cassdev.com/tags/tutorial/>Tutorial</a></li></ul></footer></article></main><footer class=footer><span>Copyright © 2025-2025 Cassius0924. All rights reserved.</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>